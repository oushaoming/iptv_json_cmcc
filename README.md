# IPTV JSON 转 M3U/DIYP 工具

这是一个用于将IPTV频道的JSON数据文件转换为M3U或DIYP格式播放列表文件的图形界面工具。

python 3.8+

![UI](https://github.com/oushaoming/iptv_json_cmcc/blob/main/iptv_json_cmcc.jpg)

## 功能特性

- **多来源支持**：从URL下载JSON数据或选择本地JSON文件进行转换
- **多格式输出**：支持转换为M3U或DIYP格式的播放列表文件
- **流类型选择**：支持ZTE、HW或两者都尝试的流类型选择
- **画质控制**：提供超高清优先、高清优先、标清优先等画质偏好选项
- **多画质输出**：支持在播放列表中包含多个画质的频道流
- **时间戳功能**：可选择在输出文件名中添加时间戳
- **中间表输出**：可选择输出CSV格式的中间数据文件，便于查看和分析频道信息
- **UDP代理配置**：支持配置UDP代理以优化流媒体播放
- **用户友好界面**：提供直观的图形界面，包含进度条和实时日志输出
- **配置保存**：自动保存和加载用户的配置参数

## 使用说明

### 基本操作

1. **数据来源选择**：
   - 通过URL下载：在URL输入框中输入JSON数据的URL，然后点击"下载并转换"按钮
   - 本地文件：点击"选择本地文件"按钮，浏览并选择本地的JSON文件

2. **输出设置**：
   - 输出文件：指定输出文件的路径和名称
   - 输出格式：从下拉菜单选择M3U或DIYP格式
   - 添加时间戳：勾选此选项可在输出文件名中添加时间戳
   - 多画质：勾选此选项可在输出文件中包含多个画质的频道流
   - 输出中间表：勾选此选项可生成CSV格式的中间数据文件

3. **高级选项**：
   - 流类型：选择ZTE、HW或两者都尝试
   - 画质：选择超高清优先、高清优先或标清优先
   - UDP代理：输入UDP代理地址（如 `127.0.0.1:1234`）

4. **开始转换**：
   - 确认所有设置后，点击相应的按钮开始转换过程
   - 转换过程中可以通过进度条和日志查看当前状态
   - 转换完成后会显示成功提示，并提供生成的频道数量统计

## 技术说明

### 核心功能

1. **JSON数据解析**：支持解析不同格式的IPTV频道JSON数据
2. **频道处理**：根据用户选择的流类型和画质偏好对频道进行筛选和排序
3. **播放列表生成**：
   - M3U格式：生成符合标准的M3U播放列表文件
   - DIYP格式：生成适用于DIYP播放器的频道列表文件
4. **中间数据处理**：可生成CSV格式的中间数据文件，包含频道的详细信息

### 程序结构

- `IPTV2M3U` 类：核心转换逻辑实现
- `IPTV2M3UGUI` 类：图形用户界面实现
- 多线程处理：下载和转换过程在单独线程中执行，避免界面卡顿

## 系统要求

- Python 3.x
- 依赖库：`tkinter`（图形界面）、`requests`（网络请求）、`json`（数据解析）

## 运行方式

直接运行Python脚本文件：

```bash
python iptv_json_cmcc.py
```

## 注意事项

- 确保输入的JSON数据格式正确，否则可能导致转换失败
- 对于大型JSON文件，转换过程可能需要较长时间
- 使用UDP代理时，请确保代理服务已正确配置并运行
- 生成的播放列表文件请使用兼容的播放器打开

## 常见问题

1. **转换失败**：检查JSON文件格式是否正确，网络连接是否正常
2. **播放列表为空**：可能是JSON文件中没有找到有效的频道数据
3. **播放不流畅**：尝试配置UDP代理或选择较低的画质偏好

## 许可证

[MIT License](https://opensource.org/licenses/MIT)

## 更新日志

- 增加了"输出中间表"功能，可生成CSV格式的频道数据文件
- 优化了多线程处理逻辑，提高程序稳定性
- 完善了错误处理和日志输出功能
- 改进了配置保存和加载机制

---

© 2023 IPTV JSON转M3U/DIYP工具开发团队